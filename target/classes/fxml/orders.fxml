<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.SVGPath?>

<VBox spacing="0"
      styleClass="root"
      xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.cmpe343.fx.controller.OrdersController">
      
    <!-- TOP BAR (Same as Customer Page) -->
    <HBox alignment="CENTER_LEFT" spacing="24" styleClass="topbar">
        
        <!-- LEFT: BRAND -->
        <HBox alignment="CENTER_LEFT" spacing="12">
            <StackPane style="-fx-background-color: rgba(99, 102, 241, 0.15); -fx-background-radius: 12; -fx-padding: 8; -fx-min-width: 40; -fx-min-height: 40;">
                 <SVGPath content="M12 2L2 7l10 5 10-5-10-5zm0 9l2-1-2-1-2 1 2 1zm0-9l10 5v6l-10 5-10-5V7l10-5z" 
                          fill="#818cf8" scaleX="1.2" scaleY="1.2"/>
            </StackPane>
            <VBox alignment="CENTER_LEFT" spacing="2">
                <Label text="GreenGrocer" styleClass="brand" style="-fx-font-size: 20px;"/>
                <Label text="Fresh Market" styleClass="muted" style="-fx-font-size: 11px; -fx-opacity: 0.7;"/>
            </VBox>
        </HBox>

        <Region HBox.hgrow="ALWAYS"/>

        <Region HBox.hgrow="ALWAYS"/>

        <Region HBox.hgrow="ALWAYS"/>

        <!-- RIGHT: ACTIONS -->
        <HBox alignment="CENTER" spacing="20">
            
            <!-- User Profile -->
            <HBox alignment="CENTER" spacing="10" style="-fx-cursor: hand;">
                <VBox alignment="CENTER_RIGHT" spacing="0">
                    <Label fx:id="usernameLabel" text="User" styleClass="user-name" style="-fx-font-size: 14px;"/>
                    <Label fx:id="welcomeLabel" text="Welcome" styleClass="muted tiny"/>
                </VBox>
                <StackPane styleClass="avatar">
                    <Label fx:id="avatarLetter" text="U" styleClass="avatar-text"/>
                </StackPane>
            </HBox>

            <!-- Divider -->
            <Separator orientation="VERTICAL" style="-fx-max-height: 24; -fx-opacity: 0.2;"/>

            <!-- Actions Group -->
            <HBox alignment="CENTER" spacing="8">
                <!-- Orders -->
                <Button onAction="#handleOpenOrders" styleClass="icon-btn" style="-fx-background-color: rgba(255,255,255,0.1);">
                    <graphic>
                        <SVGPath content="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"
                                 styleClass="icon-white"/>
                    </graphic>
                    <tooltip><Tooltip text="My Orders"/></tooltip>
                </Button>

                <!-- Cart (Click goes back) -->
                <StackPane onMouseClicked="#handleOpenCart" styleClass="icon-btn-wrap">
                    <Button styleClass="icon-btn" mouseTransparent="true">
                        <graphic>
                            <SVGPath content="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.54-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"
                                     styleClass="icon-white"/>
                        </graphic>
                    </Button>

                    <Label fx:id="cartCountBadge" text="0" visible="false"
                           styleClass="badge" mouseTransparent="true"
                           StackPane.alignment="TOP_RIGHT">
                        <StackPane.margin><Insets top="-6" right="-6"/></StackPane.margin>
                    </Label>
                </StackPane>

                <!-- Logout -->
                <Button onAction="#handleLogout" styleClass="icon-btn">
                     <graphic>
                         <SVGPath content="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" fill="#94a3b8"/>
                     </graphic>
                     <tooltip><Tooltip text="Log Out"/></tooltip>
                </Button>
            </HBox>
        </HBox>
    </HBox>

    <!-- BODY -->
    <VBox spacing="24" style="-fx-padding: 32;" VBox.vgrow="ALWAYS">
        
        <HBox alignment="CENTER_LEFT" spacing="16">
             <Label text="My Orders" styleClass="h2"/>
             <Region HBox.hgrow="ALWAYS"/>
             <!-- Filter toggles could go here -->
        </HBox>

        <ScrollPane fitToWidth="true" styleClass="scroll-pane" VBox.vgrow="ALWAYS" style="-fx-padding: 0;">
            <VBox fx:id="ordersContainer" styleClass="list-container" spacing="12"/>
        </ScrollPane>

    </VBox>

</VBox>
